CREATE TABLE CUENTA (
   IDCUENTA             INT                  NOT NULL,
   SALDO                NUMERIC(10,2)        NULL,
   CONSTRAINT PK_CUENTA PRIMARY KEY (IDCUENTA)
);

ALTER TABLE CUENTA ADD CHECK (SALDO>=0);

CREATE TABLE MOVIMIENTO (
   IDMOVIMIENTO         INT AUTO_INCREMENT  NOT NULL,
   IDCUENTA             INT                  NULL,
   TIPOMOVIMIENTO       VARCHAR(2)           NULL,
   VALOR                NUMERIC(10,2)        NULL,
   CONSTRAINT PK_MOVIMIENTO PRIMARY KEY (IDMOVIMIENTO)
);

CREATE TABLE TRANSFERENCIA (
   IDCUENTAORIGEN       INT                  NULL,
   IDCUENTADESTINO      INT                  NULL,
   IMPORTE              NUMERIC(10,2)        NULL
);

ALTER TABLE MOVIMIENTO
   ADD CONSTRAINT FK_MOVIMIEN_FK3_CUENTA FOREIGN KEY (IDCUENTA)
      REFERENCES CUENTA (IDCUENTA);

ALTER TABLE TRANSFERENCIA
   ADD CONSTRAINT FK_cuentadestino_CUENTA FOREIGN KEY (IDCUENTADESTINO)
      REFERENCES CUENTA (IDCUENTA);

ALTER TABLE TRANSFERENCIA
   ADD CONSTRAINT FK_cuentaorigen_CUENTA FOREIGN KEY (IDCUENTAORIGEN)
      REFERENCES CUENTA (IDCUENTA);
